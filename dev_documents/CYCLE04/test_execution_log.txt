============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0, langsmith-0.7.6, anyio-4.12.1
collected 93 items

tests/integration/test_rag_flow.py ..                                    [  2%]
tests/uat/test_memory_safety.py ...                                      [  5%]
tests/uat/test_uat_cycle01.py ...                                        [  8%]
tests/uat/test_uat_cycle02.py .                                          [  9%]
tests/uat/test_uat_cycle03.py ..                                         [ 11%]
tests/uat/test_uat_cycle04.py ..                                         [ 13%]
tests/unit/domain_models/test_models.py ...........                      [ 25%]
tests/unit/domain_models/test_politics.py ..                             [ 27%]
tests/unit/domain_models/test_simulation_models.py .....                 [ 33%]
tests/unit/domain_models/test_transcript.py ...                          [ 36%]
tests/unit/test_cli_input.py ...                                         [ 39%]
tests/unit/test_cli_scalability.py .                                     [ 40%]
tests/unit/test_config.py .......                                        [ 48%]
tests/unit/test_core.py ....                                             [ 52%]
tests/unit/test_cpo_agent.py ..                                          [ 54%]
tests/unit/test_domain_models.py .......                                 [ 62%]
tests/unit/test_ideator_agent.py ...                                     [ 65%]
tests/unit/test_nemawashi.py ......                                      [ 72%]
tests/unit/test_rag.py ....                                              [ 76%]
tests/unit/test_rag_errors.py ..                                         [ 78%]
tests/unit/test_simulation_integration.py ..                             [ 80%]
tests/unit/test_simulation_logic.py ........                             [ 89%]
tests/unit/test_tools.py ...                                             [ 92%]
tests/unit/test_ui.py .....                                              [ 97%]
tests/unit/test_ui_nemawashi.py ..                                       [100%]

================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                               Stmts   Miss  Cover   Missing
----------------------------------------------------------------
src/__init__.py                        0      0   100%
src/agents/__init__.py                 0      0   100%
src/agents/base.py                     9      0   100%
src/agents/cpo.py                     17      0   100%
src/agents/ideator.py                 47     12    74%   31-34, 97-107
src/agents/mixins.py                  23      6    74%   28, 31-35
src/agents/personas.py                79      7    91%   90-92, 97-98, 158-163
src/core/__init__.py                   0      0   100%
src/core/config.py                   144      7    95%   222, 277-278, 280, 285-286, 288
src/core/constants.py                 49      0   100%
src/core/factory.py                   28     13    54%   29-43
src/core/graph.py                     84     44    48%   20-22, 28-38, 60-67, 72-79, 84-97, 102-112
src/core/llm.py                        8      0   100%
src/core/nemawashi.py                 58      0   100%
src/core/simulation.py                49      1    98%   41
src/core/theme.py                     15      0   100%
src/data/__init__.py                   2      0   100%
src/data/rag.py                      104     14    87%   34-36, 101-102, 104, 132-134, 147, 150, 154-155, 160
src/domain_models/__init__.py          4      0   100%
src/domain_models/common.py           22      0   100%
src/domain_models/lean_canvas.py      24      0   100%
src/domain_models/metrics.py          41      6    85%   95-96, 100-101, 105-106
src/domain_models/mvp.py              30      0   100%
src/domain_models/persona.py          28      2    93%   124-125
src/domain_models/politics.py         10      0   100%
src/domain_models/simulation.py       20      0   100%
src/domain_models/state.py            74      8    89%   101-102, 125-133
src/domain_models/transcript.py       22      2    91%   32-33
src/tools/__init__.py                  0      0   100%
src/tools/search.py                   34      4    88%   39, 75, 90-91
src/ui/nemawashi_view.py              19      0   100%
src/ui/renderer.py                    96     10    90%   87, 90-94, 118, 128-134, 154
----------------------------------------------------------------
TOTAL                               1140    136    88%
============================= 93 passed in 21.19s ==============================
