============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0, langsmith-0.7.6, anyio-4.12.1
collected 134 items

tests/integration/test_rag_flow.py ...                                   [  2%]
tests/uat/test_cycle05_uat.py ...                                        [  4%]
tests/uat/test_cycle06_uat.py ..                                         [  5%]
tests/uat/test_memory_safety.py ...                                      [  8%]
tests/uat/test_nemawashi_uat.py ..                                       [  9%]
tests/uat/test_uat_cycle01.py ...                                        [ 11%]
tests/uat/test_uat_cycle02.py .                                          [ 12%]
tests/uat/test_uat_cycle03.py ..                                         [ 14%]
tests/unit/domain_models/test_models.py ...........                      [ 22%]
tests/unit/domain_models/test_politics.py .....                          [ 26%]
tests/unit/domain_models/test_simulation_models.py .....                 [ 29%]
tests/unit/domain_models/test_transcript.py ...                          [ 32%]
tests/unit/test_builder_agent.py ...........                             [ 40%]
tests/unit/test_cli_input.py ...                                         [ 42%]
tests/unit/test_cli_scalability.py .                                     [ 43%]
tests/unit/test_config.py .......                                        [ 48%]
tests/unit/test_core.py ....                                             [ 51%]
tests/unit/test_core_graph.py .....                                      [ 55%]
tests/unit/test_cpo_agent.py ..                                          [ 56%]
tests/unit/test_domain_models.py .......                                 [ 61%]
tests/unit/test_file_service.py ...                                      [ 64%]
tests/unit/test_governance_agent.py .                                    [ 64%]
tests/unit/test_ideator_agent.py ...                                     [ 67%]
tests/unit/test_metrics_logic.py .........                               [ 73%]
tests/unit/test_nemawashi.py ....                                        [ 76%]
tests/unit/test_rag.py .....                                             [ 80%]
tests/unit/test_rag_errors.py ....                                       [ 83%]
tests/unit/test_rag_refactored.py .                                      [ 84%]
tests/unit/test_simulation_integration.py ..                             [ 85%]
tests/unit/test_simulation_logic.py ........                             [ 91%]
tests/unit/test_tools.py ...                                             [ 94%]
tests/unit/test_ui.py .....                                              [ 97%]
tests/unit/test_v0_client.py ...                                         [100%]

================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                Stmts   Miss  Cover   Missing
-----------------------------------------------------------------
src/__init__.py                         0      0   100%
src/agents/__init__.py                  6      0   100%
src/agents/base.py                      9      0   100%
src/agents/builder.py                  95     10    89%   40-41, 48-49, 101, 130-131, 139-140, 181
src/agents/cpo.py                      45     11    76%   55-57, 74-81, 92-94
src/agents/governance.py              108     19    82%   45-46, 107-116, 161-163, 175-176, 191, 196
src/agents/ideator.py                  47     12    74%   31-34, 97-107
src/agents/mixins.py                   23      6    74%   28, 31-35
src/agents/personas.py                 79     10    87%   90-92, 97-98, 107-110, 158-163
src/core/__init__.py                    0      0   100%
src/core/config.py                    159      0   100%
src/core/constants.py                  99      0   100%
src/core/exceptions.py                  6      0   100%
src/core/factory.py                    42     19    55%   24-25, 30, 43-49, 57-68
src/core/graph.py                     145     32    78%   28-30, 49-55, 65-66, 103-107, 119-120, 146-147, 157-159, 162, 215-221, 229-238
src/core/llm.py                         8      0   100%
src/core/metrics.py                    17      0   100%
src/core/nemawashi/__init__.py          5      0   100%
src/core/nemawashi/analytics.py        52     22    58%   26, 33, 41-45, 55-56, 80-98, 102-107
src/core/nemawashi/consensus.py        76     10    87%   45-47, 50, 82, 115-116, 131, 142, 163
src/core/nemawashi/engine.py           19      1    95%   34
src/core/nemawashi/nomikai.py          42      2    95%   33-34
src/core/services/__init__.py           0      0   100%
src/core/services/file_service.py      22      3    86%   35, 38-39
src/core/simulation.py                 24      0   100%
src/core/theme.py                      18      0   100%
src/core/validators.py                 47     10    79%   47, 50-51, 53-54, 61, 64-65, 67-68
src/data/__init__.py                    2      0   100%
src/data/rag.py                       227     37    84%   63-64, 73-76, 98-99, 143-144, 153-154, 159-163, 201, 224-227, 236-238, 274, 278-279, 314-315, 332, 338-339, 398, 410-413
src/domain_models/__init__.py           8      0   100%
src/domain_models/common.py            23      0   100%
src/domain_models/enums.py             12      0   100%
src/domain_models/lean_canvas.py       24      0   100%
src/domain_models/metrics.py           60      6    90%   122-123, 127-128, 132-133
src/domain_models/mvp.py               54      4    93%   129-130, 138-139
src/domain_models/persona.py           28      2    93%   124-125
src/domain_models/politics.py          59      3    95%   77, 95, 106
src/domain_models/simulation.py        16      0   100%
src/domain_models/state.py             67      8    88%   76-77, 100-108
src/domain_models/transcript.py        22      2    91%   32-33
src/domain_models/validators.py        12      0   100%
src/tools/__init__.py                   3      0   100%
src/tools/search.py                    34      4    88%   39, 75, 90-91
src/tools/v0_client.py                 61     19    69%   58-60, 106-108, 111-118, 126-132
src/ui/renderer.py                     96     10    90%   87, 90-94, 118, 128-134, 154
-----------------------------------------------------------------
TOTAL                                2001    262    87%
============================= 134 passed in 18.51s =============================
